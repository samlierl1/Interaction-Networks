# Interaction Networks
Using the .entities and .tokens files generated by bookNLP, the algorithms leverage the dependency relations and POS tagging to build networks of interactions between characters. 

## Basic Co-occurrence  Network:
***Precision:*** 0.34495 <br>    ***Recall:*** 1.0 <br>   ***F1:*** 0.51295  

The most basic of these networks is the co-occurrence network which considers any two entities that occur in the same sentence to be interacting. Unlike the other network building methods, this one non-directional and has undirected edges (i.e., entity A co-occurring with entity B is equivalent to entity B co-occurring with entity A).

### Examples:
>***She**’d lost **David**.*

The model successfully captures the connection between **She** and **David**

<br>


>***I** met **a man driving a wagon** and asked him how far it was to the kingdom and what direction.*

The model successfully captures the connection between ***I*** and ***a man driving a wagon***

<br>

>*From the rim **I** could see my **father** and **Jane** on horseback , and **a number of the slaves** , including **Toby** , whose liberation once proposed by **OGF** had been denied for now by Plantation House .*

Since this method doesn't consider the relationship between the entities in the sentence aside from them being within the same sentence, this method connects all the entities with each other despite not all of them necessarily interacting with each other which results in a lot of false positives. 


<br>

>***An elderly philologist** told Glikman that only once before in his lifetime had he witnessed such a vast and insistent ovation : forty - four years previously , when **Tchaikovsky** had conducted the premiere of his Sixth Symphony .*

In this example, the connection between ***An elderly philologist*** and ***Tchaikovsky*** is successfully found. Both entities are labelled as nsubjs so all the other methods miss this connection. 


<br>
<br>


## Subj-Obj Co-occurrence Network:
***Precision:*** 0.55769 <br>    ***Recall:*** 0.84466 <br>   ***F1:*** 0.67181

This network building method is an improved version of the basic version of the co-occurrence method. Instead of pairing all entities in a sentence with each other, this method pairs subjects with objects, cutting down on mistakes. This method also improves on the basic co-occurrence by making the network directional.

### Examples:

>*Brandy laughed , and **Hannah** hushed **her** .*

In this example, the connection between ***Hannah*** and ***her*** (Brandy) is successfully made. 

<br>

>***I** don’t think a **team member** reports back to **anyone** , even if it’s to the **admiral** , unless it’s to investigate the team itself .*

In this example, the model struggles with differentiating "hypothetical" interactions. Connections are incorrectly made between ***I*** and ***anyone***/***admiral*** as well as ***team member*** and ***anyone***/***admiral***. 

<br>

>***You** looked up , uneasily , and casually pulled a notebook over the essay , as if to hide the evidence from **Tom** .*

In this example, the connection between ***You*** and ***Tom***
is correctly made. This is an example that Double Hop struggles with due to the longer distance between the two entities. 
<br>
<br>


## Basic Double Hop:
***Precision:*** 0.8696 <br>    ***Recall:*** 0.5825	 <br>   ***F1:*** 0.6977

This network building model uses the dependency relations and syntactic head ID's generated by bookNLP to perform "hops"  between words in a sentence to find entities that are interacting with each other. A "hop" refers to the process of jumping to the syntactic head ID of a given word.

The model begins by identifying all the subjects (nsubj) and objects (obj) that are also considered entities. For each identified subject, the model determines the associated verb by tracing the syntactic head ID that connects them. It then iterates through the objects to see if their syntactic head ID connects to the verb. For direct objects ('dobjs') the model performs one "hop" to check if the direct object is connected to the verb linked with the current subject. For prepositional objects (pobjs) the model is allowed an extra hop.

### Examples:


>*And on the bridge , after we met the dinosaurs , the Dark Oculator fled not because **she** recognized **me** — but because **she** recognized **you** .*

In this example, the connections between ***she(nsubj)*** and ***you***/***me(dobjs)*** are successfully made. In both cases, the syntactic head ID's of ***she(nsubj)*** and  ***you***/***me(dobjs)*** connect to **recognized** which is why the connections are made. 

<br>

>*What **I** ’ve learned from **Papaw Phil** about never giving up is that there is nothing wrong with starting small if you just keep going .*

In this example, the connection between ***I(nsubj)*** and ***Papaw Phil(pobj)*** is successfully made. The syntactic ID of ***I*** leads to ***learned***.
***Phil*** hops to *from* which then hops to **learned**, connecting the two entities:

***Phil***->from->learned->***I***

<br>
<br>


## Improved Double Hop:
***Precision:*** 0.8478		<br>    ***Recall:*** 0.7573 <br>   ***F1:*** 0.8000	

This version of Double Hop improves on the basic Double Hop by adding several conditions:

#### 1. All entities that are *anyone, people, nobody, anybody* are removed from consideration: 

>***She** walked with the busy , measured tread heavy **people** sometimes had , and , like a train , sighed whenever she started or stopped .*

In the previous version of Double Hop, a connection between ***She*** and ***people*** would be made. However, people is clearly not on actual entitiy. The same applies for nobody, anyone, people and anybody. BookNLP will consider these words entities sometimes despite not being actual entities. 

#### 2. Conjunctions(conj) are considered as objects.

> *From the rim ***I*** could see my father and ***Jane*** on horseback , and a number of the slaves , including Toby , whose liberation once proposed by OGF had been denied for now by Plantation House .*

With this condition in place the connection between ***I*** and ***Jane*** is now made. When an entity is labelled as a conj it is typically because the entity is associated with another noun. In this case ***Jane*** is labelled as a conj because she is considered in relation to ***father***.


#### 3. Datives(dative) are considered as objects.
>*She looks at me as **I** hand **her** some tiny earphones , and she puts them into her ears before I press a button .*

With this condition in place the connection between ***I(nsubj)*** and ***her(dative)*** is now made. Datives are the indirect object or recipient/beneficiary of an action. 

#### 4. Attributives(attr) are considered as objects.

>***I** thought it was **you** what are you doing on Victor Emilio Estrada ?*

With this condition in place the connection between ***I(nsubj)*** and ***you(attr)*** is now made. In this case ***you*** is considered an attr because it acts as the complement to ***it***. 

However, this does also raise errors.

>***She** was the seventh **witness** presented by the prosecution in two days but as far as I was concerned she was the only witness .*   

With this condition in place the connection is incorrectly made between ***She(nsubj)*** and ***witness(attr)*** is now made. In this case ***witness*** is considered an attr because it acts as the complement to ***She***. However, because witness is also considered an entity by bookNLP it incorrectly connects the two.


#### 5. If the first word in the hopping process is labelled as a 'prep' (preposition) it doesn't count it as a hop.

>*Needing to hear what this **boy** has to say about **her**.*

With this condition in place, ***boy*** and ***her*** get successfully connected. 

***her(pobj)***->***about(prep)***->say->has->***boy(nsubj)***

Prepositions are typically words like "in," "on," "at" or "about". They modify the verb that they're connected to and thus an extra hop being allowed if the first word in the hopping order is a preposition allows a lot of new connections to be made. 


#### 6. If the first word in the hopping process is labelled as a 'xcomp' (open clausal complement) it doesn't count it as a hop.

>*The only sadness to the trip was that ***Johnny Lucinge*** was not well enough to accompany ***her***.* 

***her(dobj)***->***accompany(xcomp)***->enough->was->***Johnny Lucinge(nsubj)***

 Xcomps add information that complete the meaning of the main verb. Adding an extra hop when an xcomp is present increases the likelihood of finding the connecting verb.


#### 7. Added poss (possessive) labels as potential subjects and objects.

>*T.J. flexed his fingers , as if he were having sympathetic pains from his father , Tyr , who ’d gotten ***his(poss) hand(nsubj)*** bitten off by ***Fenris Wolf(pobj)*** .*


For an entitiy labelled as poss to be considered a subj or obj it has to go through a couple steps. Firstly, it checks whether the entity is in possession of a subject or object by hopping to it's syntactic head ID. In this example, the syntactic head ID of ***his(poss)*** leads to  ***hand*** which is labelled as nsubj.

***his(poss)*** -> ***hand(nsubj)***

If the subj/obj isn't labelled as an entity already, it adds it to the either the list of objs/subjs to iterate through when doing the pairing process. 


***his(poss)*** -> ***hand(nsubj)*** -> bitten -> by -> ***Wolf(pobj)*** 




<br>
<br>



<br>
<br>

<br>
<br>

<br>
<br>

<br>
<br>

<br>
<br>

<br>
<br>

<br>
<br>

## Only dobj Double Hop
(The basic version of doublehop that I added included pobjs but these are the stats of doublehop that only considers dobjs in case you wanted this as well.) <br> 
***Precision:*** 0.9000	 <br>    ***Recall:*** 0.3495 <br>   ***F1:*** 0.5035



